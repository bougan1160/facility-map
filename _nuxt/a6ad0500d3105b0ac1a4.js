(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{311:function(e,l,t){var content=t(325);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(13).default)("61d59f78",content,!0,{sourceMap:!1})},324:function(e,l,t){"use strict";var o=t(311);t.n(o).a},325:function(e,l,t){(e.exports=t(12)(!1)).push([e.i,"#information{z-index:10000;bottom:0;left:0;width:400px}#information,.close{position:absolute;top:0}.close{right:0;padding:10px;cursor:pointer}.row-invert{background-color:#d4d4d4}#setting{position:absolute;z-index:10000;top:20px;right:10px;width:200px;max-height:400px;background-color:#fff}.v-expansion-panel-content__wrap{padding:0}.v-list-item__content{padding:10px 15px}.v-input--radio-group{margin:0}.legend span{display:inline-block;height:25px}.legend img,.legend span{vertical-align:middle}.leaflet-marker-icon-color-blue{-webkit-filter:hue-rotate(30deg);filter:hue-rotate(30deg)}.leaflet-marker-icon-color-pink{-webkit-filter:hue-rotate(90deg);filter:hue-rotate(90deg)}.leaflet-marker-icon-color-red{-webkit-filter:hue-rotate(150deg);filter:hue-rotate(150deg)}.leaflet-marker-icon-color-yellow{-webkit-filter:hue-rotate(210deg);filter:hue-rotate(210deg)}.leaflet-marker-icon-color-green{-webkit-filter:hue-rotate(270deg);filter:hue-rotate(270deg)}.leaflet-marker-icon-color-alua{-webkit-filter:hue-rotate(330deg);filter:hue-rotate(330deg)}.leaflet-marker-icon-color-invisible{display:none}",""])},367:function(e,l,t){"use strict";t.r(l);t(36),t(37),t(46),t(19),t(115);var o=t(18),r=(t(73),t(7),t(6),{data:function(){return{center:[34.76638,134.79688],zoom:14,attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',populationTarget:"",information:!1,population:{type:"population",target:"all",generation:"all"},facilityType:"all",legends:{population:{values:[],unit:"",label:""},facility:{values:[],unit:"",label:""}}}},watch:{population:{handler:"changePopulationTarget",deep:!0},facilityType:"changeFacilityType"},mounted:function(){var e=this;setTimeout((function(){e.layers={},e.initLayers(e.$refs.map.mapObject)}),100)},methods:{initLayers:function(map){var e=this;this.$csvLoader("282162_sisetubetukarute_20171.csv").then((function(data){var header=data.shift(),l=header.indexOf("名称"),t=e.$toGeoJSON(header,data,{latCol:"緯度",lonCol:"経度"});e.layers.facility=L.geoJSON(t).bindPopup((function(e){return e.feature.properties.values[l]})).on("click",(function(l){l.layer&&l.layer.feature&&l.layer.feature.properties&&(e.information=l.layer.feature.properties)})).addTo(map),e.changeFacilityType()})).catch(console.error),Promise.all([this.$csvLoader("282162_population_20191129.csv"),this.$axios.get("/data/takasago.json").then((function(e){return e.data}))]).then((function(l){var t=Object(o.a)(l,2),r=t[0],n=t[1],header=r.shift(),c=header.indexOf("地域名");n.features.forEach((function(e){var data=r.find((function(p){return p[c]===e.properties.layer}));data&&(e.properties=Object.assign(e.properties,{header:header,values:data}))})),e.layers.population=L.geoJSON(n,{style:e.populationStyling()}).addTo(map),e.changePopulationTarget("総人口")})).catch(console.error)},populationStyling:function(){var style={cols:[],colors:[],unitLabel:"",legendLabel:""};if("house"===this.population.type)style.cols=["世帯数"],style.colors=[{val:3e3,color:"#ff3b00"},{val:4500,color:"#ffe086"},{val:6e3,color:"#5eff65"},{val:7500,color:"#46ffe2"},{val:9e3,color:"#0faeff"},{val:10500,color:"#0227ff"}],style.unitLabel="世帯",style.legendLabel="世帯数";else if("all"===this.population.target&&"all"===this.population.generation)style.cols=["総人口"],style.colors=[{val:5e3,color:"#ff3b00"},{val:8e3,color:"#ffe086"},{val:11e3,color:"#5eff65"},{val:14e3,color:"#46ffe2"},{val:17e3,color:"#0faeff"},{val:2e4,color:"#0227ff"}],style.unitLabel="人",style.legendLabel="総人口";else if("all"!==this.population.target&&"all"===this.population.generation)style.cols=["man"===this.population.target?"男性":"女性"],style.colors=[{val:3e3,color:"#ff3b00"},{val:4500,color:"#ffe086"},{val:6e3,color:"#5eff65"},{val:7500,color:"#46ffe2"},{val:9e3,color:"#0faeff"},{val:10500,color:"#0227ff"}],style.unitLabel="人",style.legendLabel="".concat(style.cols[0],"のみ");else if("all"===this.population.target&&"all"!==this.population.generation){var e="18"===this.population.generation?"85歳以上":"".concat(5*this.population.generation,"-").concat(5*this.population.generation+4,"歳");style.cols=["".concat(e,"の男性"),"".concat(e,"の女性")],style.colors=[{val:100,color:"#ff3b00"},{val:400,color:"#ffe086"},{val:700,color:"#5eff65"},{val:1e3,color:"#46ffe2"},{val:1300,color:"#0faeff"},{val:1600,color:"#0227ff"}],style.unitLabel="人",style.legendLabel="".concat(e,"のみ")}else if("all"!==this.population.target&&"all"!==this.population.generation){var l="man"===this.population.target?"男性":"女性",t="18"===this.population.generation?"85歳以上":"".concat(5*this.population.generation,"-").concat(5*this.population.generation+4,"歳");style.cols=["".concat(t,"の").concat(l)],style.colors=[{val:100,color:"#ff3b00"},{val:300,color:"#ffe086"},{val:500,color:"#5eff65"},{val:700,color:"#46ffe2"},{val:900,color:"#0faeff"},{val:1100,color:"#0227ff"}],style.unitLabel="人",style.legendLabel="".concat(style.cols[0],"のみ")}return this.legends.population={values:style.colors,unit:style.unitLabel,label:style.legendLabel},function(e){var header=e.properties.header,l=e.properties.values,t=0;style.cols.forEach((function(col){var e=header.indexOf(col);t+=Number(l[e])}));var o=style.colors.find((function(e){return t<=e.val}));return{fillColor:o?o.color:"*",opacity:.5}}},changePopulationTarget:function(){this.layers.population.setStyle(this.populationStyling())},changeFacilityType:function(){var e=this,l=["blue","green","alua","yellow","pink","red"],t=[];"all"===this.facilityType?(this.legends.facility.label="すべて",t=[{label:"公共施設",color:""}]):"school"===this.facilityType?(t=[{val:"市民文化系施設",color:l[0]},{val:"社会教育系施設",color:l[1]},{val:"スポーツ施設",color:l[2]},{val:"学校教育系施設",color:l[3]},{val:"就学前教育保育施設",color:l[4]},{val:"公園施設",color:l[5]}],this.legends.facility.label="教育/文化系施設"):"hospital"===this.facilityType?(t=[{val:"保健・福祉施設",color:l[0]},{val:"医療施設",color:l[1]},{val:"スポーツ施設",color:l[2]},{val:"学校教育系施設",color:l[3]},{val:"就学前教育保育施設",color:l[4]},{val:"公園施設",color:l[5]}],this.legends.facility.label="医療/福祉系施設"):"gov"===this.facilityType?(t=[{val:"行政系施設",color:l[0]},{val:"産業系施設",color:l[1]},{val:"処理施設",color:l[2]},{val:"上水道施設",color:l[3]},{val:"下水道施設",color:l[4]}],this.legends.facility.label="行政/産業系施設"):"year"===this.facilityType?(t=[{val:1,color:l[0],label:"1年以内"},{val:10,color:l[1],label:"10年以内"},{val:20,color:l[2],label:"20年以内"},{val:50,color:l[3],label:"50年以内"},{val:100,color:l[4],label:"100年以内"},{color:l[5],label:"100年以上前"}],this.legends.facility.label="設置年"):"evacuation"===this.facilityType?(t=[{val:"指定避難施設",color:l[0]},{val:"避難所指定",color:l[2]}],this.legends.facility.label="防災拠点指定"):"cost"===this.facilityType?(t=[{color:"red",label:"赤字"},{color:"blue",label:"黒字"}],this.legends.facility.label="収支"):"user"===this.facilityType&&(t=[{val:1e3,color:l[5],label:"〜1,000人"},{val:5e3,color:l[4],label:"〜5,000人"},{val:1e4,color:l[3],label:"〜10,000人"},{val:5e4,color:l[2],label:"〜50,000人"},{val:1e5,color:l[1],label:"〜100,000人"},{color:l[0],label:"100,000人以上"}],this.legends.facility.label="利用者"),this.legends.facility.values=t,this.layers.facility.eachLayer((function(o){var r=o.feature;if(o._icon.className=o._icon.className.replace(/leaflet-marker-icon-color-[a-z]+/g,""),o.closePopup(),o.setOpacity(1),["school","hospital","gov","evacuation"].includes(e.facilityType)){var n=r.properties.header.indexOf("evacuation"===e.facilityType?"防災拠点指定":"大分類"),c=r.properties.values[n],v=t.find((function(e){return e.val===c})),f=v?v.color:"invisible";L.DomUtil.addClass(o._icon,"leaflet-marker-icon-color-".concat(f)),v||o.setOpacity(0)}else if("year"===e.facilityType){var d,h=r.properties.header.indexOf("設置年月日_年(西暦)"),y=Number(r.properties.values[h]),m=(new Date).getFullYear();m-y<=1?d=l[0]:m-y<=10?d=l[1]:m-y<=20?d=l[2]:m-y<=50?d=l[3]:m-y<=100?d=l[4]:m-y>100?d=l[5]:(d="invisible",o.setOpacity(0)),L.DomUtil.addClass(o._icon,"leaflet-marker-icon-color-".concat(d))}else if("cost"===e.facilityType){var _,x=r.properties.header.indexOf("収支(円)"),k=Number(r.properties.values[x]);k>0?_="blue":k<0?_="red":(_="invisible",o.setOpacity(0)),L.DomUtil.addClass(o._icon,"leaflet-marker-icon-color-".concat(_))}else if("user"===e.facilityType){var w,T=r.properties.header.indexOf("利用者数(人)"),C=Number(r.properties.values[T]);C<=1e3?w=l[5]:C<=5e3?w=l[4]:C<=1e4?w=l[3]:C<=5e4?w=l[2]:C<=1e5?w=l[1]:C>1e5?w=l[0]:(w="invisible",o.setOpacity(0)),L.DomUtil.addClass(o._icon,"leaflet-marker-icon-color-".concat(w))}}))}}}),n=(t(324),t(55)),c=t(86),v=t.n(c),f=t(107),d=t(52),h=t(359),y=t(279),m=t(281),_=t(360),x=t(361),k=t(362),w=t(363),T=t(316),C=t(323),O=t(318),S=t(320),V=t(369),P=t(364),N=t(365),$=t(366),component=Object(n.a)(r,(function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("v-layout",{staticStyle:{position:"relative"},attrs:{column:""}},[t("div",{staticStyle:{height:"90%"},attrs:{id:"map-wrap"}},[t("client-only",[t("l-map",{ref:"map",attrs:{zoom:e.zoom,center:e.center}},[t("l-tile-layer",{attrs:{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:e.attribution}})],1)],1)],1),e._v(" "),t("div",{attrs:{id:"legends"}},[t("div",{staticClass:"d-flex pa-3",attrs:{id:"population"}},[t("p",{staticClass:"font-weight-bold mr-2 mb-0"},[e._v("\n        "+e._s("人口("+e.legends.population.label+")")+"\n      ")]),e._v(" "),e._l(e.legends.population.values,(function(legend,l){return t("div",{key:l,staticClass:"legend mr-3"},[t("span",{staticStyle:{width:"50px",opacity:"0.5"},style:{"background-color":legend.color}}),e._v(" "),t("span",[e._v(e._s("~"+legend.val+e.legends.population.unit))])])}))],2),e._v(" "),t("div",{staticClass:"d-flex pa-3",attrs:{id:"facility"}},[t("p",{staticClass:"font-weight-bold mr-2 mb-0"},[e._v("\n        "+e._s("施設("+e.legends.facility.label+")")+"\n      ")]),e._v(" "),e._l(e.legends.facility.values,(function(legend,l){return t("div",{key:l,staticClass:"legend mr-3"},[t("img",{class:"leaflet-marker-icon-color-"+legend.color,attrs:{src:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon-2x.png",height:"25px"}}),e._v(" "),t("span",[e._v(e._s(""+(legend.label?legend.label:legend.val)))])])}))],2)]),e._v(" "),e.information?t("v-card",{staticClass:"pa-3",attrs:{id:"information"}},[t("div",{staticClass:"close",on:{click:function(l){e.information=!1}}},[t("v-icon",[e._v("mdi-close")])],1),e._v(" "),t("v-card-title",[e._v(e._s(e.information.values[e.information.header.indexOf("名称")]))]),e._v(" "),t("v-container",{staticStyle:{height:"calc(100% - 60px)","overflow-y":"auto"}},e._l(e.information.header,(function(l,o){return t("v-row",{key:o,class:o%2==0?"row-invert":"",attrs:{justify:"center"}},[t("v-col",{staticClass:"key-label"},[e._v(e._s(l)+"\n        ")]),e._v(" "),t("v-col",{staticStyle:{"word-break":"break-all"}},[e._v(e._s(e.information.values[o]))])],1)})),1)],1):e._e(),e._v(" "),t("v-card",{attrs:{id:"setting"}},[t("v-expansion-panels",{attrs:{accordion:""}},[t("v-expansion-panel",[t("v-expansion-panel-header",[e._v("人口")]),e._v(" "),t("v-expansion-panel-content",{staticStyle:{"max-height":"350px"}},[t("v-list",{staticStyle:{"overflow-y":"auto"},attrs:{height:"100%"}},[t("v-divider"),e._v(" "),t("v-subheader",[e._v("種別")]),e._v(" "),t("v-list-item-content",[t("v-radio-group",{attrs:{"hide-details":"",dense:""},model:{value:e.population.type,callback:function(l){e.$set(e.population,"type",l)},expression:"population.type"}},[t("v-radio",{attrs:{label:"人口",value:"population"}}),e._v(" "),t("v-radio",{attrs:{label:"世帯数",value:"house"}})],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-subheader",[e._v("対象")]),e._v(" "),t("v-list-item-content",[t("v-radio-group",{attrs:{"hide-details":"",dense:"",disabled:"house"===e.population.type},model:{value:e.population.target,callback:function(l){e.$set(e.population,"target",l)},expression:"population.target"}},[t("v-radio",{attrs:{label:"すべて",value:"all"}}),e._v(" "),t("v-radio",{attrs:{label:"男性",value:"man"}}),e._v(" "),t("v-radio",{attrs:{label:"女性",value:"woman"}})],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-subheader",[e._v("年代")]),e._v(" "),t("v-list-item-content",[t("v-radio-group",{attrs:{"hide-details":"",dense:"",disabled:"house"===e.population.type},model:{value:e.population.generation,callback:function(l){e.$set(e.population,"generation",l)},expression:"population.generation"}},[t("v-radio",{attrs:{label:"すべて",value:"all"}}),e._v(" "),e._l(17,(function(e,l){return t("v-radio",{key:e,attrs:{label:5*l+"-"+(5*l+4)+"歳",value:l}})})),e._v(" "),t("v-radio",{attrs:{label:"85歳以上",value:"18"}})],2)],1)],1)],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",[e._v("施設")]),e._v(" "),t("v-expansion-panel-content",{staticClass:"pa-3",staticStyle:{"overflow-y":"auto"},attrs:{height:"100%"}},[t("v-radio-group",{attrs:{"hide-details":"",dense:""},model:{value:e.facilityType,callback:function(l){e.facilityType=l},expression:"facilityType"}},[t("v-radio",{attrs:{label:"すべて",value:"all"}}),e._v(" "),t("v-radio",{attrs:{label:"教育/文化系施設",value:"school"}}),e._v(" "),t("v-radio",{attrs:{label:"医療/福祉系施設",value:"hospital"}}),e._v(" "),t("v-radio",{attrs:{label:"行政/産業系施設",value:"gov"}}),e._v(" "),t("v-radio",{attrs:{label:"設置年",value:"year"}}),e._v(" "),t("v-radio",{attrs:{label:"防災拠点指定",value:"evacuation"}}),e._v(" "),t("v-radio",{attrs:{label:"収支",value:"cost"}}),e._v(" "),t("v-radio",{attrs:{label:"利用者数",value:"user"}})],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);l.default=component.exports;v()(component,{VCard:f.a,VCardTitle:d.c,VCol:h.a,VContainer:y.a,VDivider:m.a,VExpansionPanel:_.a,VExpansionPanelContent:x.a,VExpansionPanelHeader:k.a,VExpansionPanels:w.a,VIcon:T.a,VLayout:C.a,VList:O.a,VListItemContent:S.a,VRadio:V.a,VRadioGroup:P.a,VRow:N.a,VSubheader:$.a})}}]);